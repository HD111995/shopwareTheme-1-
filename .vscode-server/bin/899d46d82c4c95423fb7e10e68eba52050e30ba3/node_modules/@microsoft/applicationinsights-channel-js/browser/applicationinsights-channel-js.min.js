/*!
 * Application Insights JavaScript SDK - Channel, 2.6.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,t=function(e){"use strict";var o="function",s="object",_="undefined",r="prototype",i="hasOwnProperty",n=Object,l=n[r],t=n.assign,a=n.create,u=n.defineProperty,c=l[i];function d(){return typeof globalThis!==_&&globalThis?globalThis:typeof self!==_&&self?self:typeof window!==_&&window?window:typeof global!==_&&global?global:null}function f(e){throw new TypeError(e)}(d()||{}).Symbol,(d()||{}).Reflect;var p=t||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])l[i].call(t,a)&&(e[a]=t[a]);return e},g=function(e,t){return(g=n.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[i](n)&&(e[n]=t[n])})(e,t)};function h(e,t){function n(){this.constructor=e}typeof t!==o&&null!==t&&f("Class extends value "+t+" is not a constructor or null"),g(e,t),e[r]=null===t?function(e){if(a)return a(e);if(null==e)return{};var t=typeof e;function n(){}return t!==s&&t!==o&&f("Object prototype may only be an Object:"+e),n[r]=e,new n}(t):(n[r]=t[r],new n)}var A,m="constructor",v="prototype",y="function",I="_dynInstFuncs",C="_isDynProxy",S="_dynClass",T="_dynCls$",w="_dynInstChk",x=w,b="_dfOpts",N="_unknown_",R="__proto__",E="useBaseInst",L="setInstFuncs",F=Object,M=F.getPrototypeOf,P=0;function D(e,t){return e&&F[v].hasOwnProperty.call(e,t)}function k(e){return e&&(e===F[v]||e===Array[v])}function B(e){return k(e)||e===Function[v]}function O(e){if(e){if(M)return M(e);if(e=e[R]||e[v]||(e[m]?e[m][v]:null))return e}return null}function U(e,t){var n=[],r=F.getOwnPropertyNames;if(r)n=r(e);else for(var a in e)"string"==typeof a&&D(e,a)&&n.push(a);if(n&&0<n.length)for(var i=0;i<n.length;i++)t(n[i])}function j(e,t,n){return t!==m&&typeof e[t]===y&&(n||D(e,t))}function q(e){throw new TypeError("DynamicProto: "+e)}function z(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function K(e,t){return D(e,v)?e.name||t||N:((e||{})[m]||{}).name||t||N}function G(e,r,t,n){D(e,v)||q("theClass is an invalid class definition.");var a=e[v];!function(e){if(M)for(var t=[],n=O(r);n&&!B(n)&&!z(t,n);){if(n===e)return 1;t.push(n),n=O(n)}}(a)&&q("["+K(e)+"] is not in class hierarchy of ["+K(r)+"]");var i=null;D(a,S)?i=a[S]:(i=T+K(e,"_")+"$"+P,P++,a[S]=i);var o=G[b],s=!!o[E];s&&n&&n[E]!==undefined&&(s=!!n[E]);var l,u,c,d,f,p,e=(u={},U(l=r,function(e){!u[e]&&j(l,e,!1)&&(u[e]=l[e])}),u);t(r,function(e,t,n,i){function r(e,t,n){var r,a=t[n];return a[C]&&i&&!1!==(r=e[I]||{})[x]&&(a=(r[t[S]]||{})[n]||a),function(){return a.apply(e,arguments)}}var a={};U(n,function(e){a[e]=r(t,n,e)});for(var o=O(e),s=[];o&&!B(o)&&!z(s,o);)U(o,function(e){!a[e]&&j(o,e,!M)&&(a[e]=r(t,o,e))}),s.push(o),o=O(o);return a}(a,r,e,s)),o=!!M&&!!o[L],c=a,i=i,d=r,f=e,n=!1!==(o=o&&n?!!n[L]:o),k(c)||(o=d[I]=d[I]||{},p=o[i]=o[i]||{},!1!==o[x]&&(o[x]=!!n),U(d,function(e){var n,r,a;j(d,e,!1)&&d[e]!==f[e]&&(p[e]=d[e],delete d[e],D(c,e)&&(!c[e]||c[e][C])||(c[e]=(n=c,r=e,(a=function(){var e,t;return(function(e,t,n,r){var a=null;if(e&&D(n,S)){var i=e[I]||{};if((a=(i[n[S]]||{})[t])||q("Missing ["+t+"] "+y),!a[w]&&!1!==i[x]){for(var o=!D(e,t),s=O(e),l=[];o&&s&&!B(s)&&!z(l,s);){var u=s[t];if(u){o=u===r;break}l.push(s),s=O(s)}try{o&&(e[t]=a),a[w]=1}catch(c){i[x]=!1}}}return a}(this,r,n,a)||(typeof(t=(t=n[e=r])===a?O(n)[e]:t)!==y&&q("["+e+"] is not a "+y),t)).apply(this,arguments)})[C]=1,a)))}))}G[b]={setInstFuncs:!0,useBaseInst:!0},(sn=A=A||{})[sn.CRITICAL=1]="CRITICAL",sn[sn.WARNING=2]="WARNING";var V={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},H="attachEvent",W="addEventListener",X="detachEvent",Y="removeEventListener",J=u;function Z(e){return l.toString.call(e)}function $(e){return e===undefined||typeof e===_}function Q(e){return null===e||$(e)}function ee(e){return typeof e===s}function te(e){return typeof e===o}function ne(e,t,n,r){void 0===r&&(r=!1);var a=!1;if(!Q(e))try{Q(e[W])?Q(e[H])||(e[H]("on"+t,n),a=!0):(e[W](t,n,r),a=!0)}catch(i){}return a}function re(e,t,n,r){if(void 0===r&&(r=!1),!Q(e))try{Q(e[Y])?Q(e[X])||e[X]("on"+t,n):e[Y](t,n,r)}catch(a){}}function ae(e,t){if(e)for(var n in e)c.call(e,n)&&t.call(e,n,e[n])}function ie(e,t){return e&&t&&~e.indexOf(t)}function oe(e){return"[object Array]"===Z(e)}function se(e){return"[object Error]"===Z(e)}function le(e){return"string"==typeof e}function ue(e){if("[object Date]"===Z(e)){var t=function(e){return 1===(e=""+e).length?"0"+e:e};return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(""+(e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function ce(e,t,n){for(var r=e.length,a=0;a<r&&!(a in e&&-1===t.call(n||e,e[a],a,e));a++);}function de(e,t,n){for(var r=e.length,a=n||e,i=Array(r),o=0;o<r;o++)o in e&&(i[o]=t.call(a,e[o],e));return i}function fe(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}var pe=!{toString:null}.propertyIsEnumerable("toString"),ge=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function he(e){var t=typeof e;t===o||t===s&&null!==e||f("objKeys called on non-object");var n,r=[];for(n in e)e&&c.call(e,n)&&r.push(n);if(pe)for(var a=ge.length,i=0;i<a;i++)e&&c.call(e,ge[i])&&r.push(ge[i]);return r}function me(){var e=Date;return e.now?e.now():(new e).getTime()}function ve(e){return se(e)?e.name:""}function ye(e,t,n,r,a){var i=n;return e&&((i=e[t])===n||a&&!a(i)||r&&!r(n)||(e[t]=i=n)),i}function Ie(e){return!!e}function Ce(e){return e&&n(t?t({},e):e)}var Se="window",Te="document",we="navigator",xe="JSON",be="msie",_e="trident/";function Ae(e){var t=d();return t&&t[e]?t[e]:e===Se&&Ne()?window:null}function Ne(){return typeof window===s&&window}function Re(){return Ne()?window:Ae(Se)}function Ee(){return typeof document===s&&document?document:Ae(Te)}function Le(){return typeof navigator===s&&navigator?navigator:Ae(we)}function Fe(){return typeof JSON===s&&JSON||null!==Ae(xe)}function Me(){return Fe()?JSON||Ae(xe):null}function Pe(e){var t=Object[r].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Fe()&&(n=Me().stringify(e)),t+n}function De(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var ke=(Be.dataType="MessageData",Be);function Be(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e,e="",Fe()&&(e=Me().stringify(r)),e=(t?" message:"+De(t):"")+(r?" props:"+De(e):""),this.message+=e}function Oe(e,t){return(e||{}).logger||new Ue(t)}var Ue=function Lr(n){this.identifier="DiagnosticLogger",this.queue=[];var a=0,o={};G(Lr,this,function(i){function e(e,t){return Q(e=n[e])?t:e}Q(n)&&(n={}),i.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},i.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},i.throwInternal=function(e,t,n,r,a){if(n=new ke(t,n,a=void 0!==a&&a,r),i.enableDebugExceptions())throw n;$(n.message)||(r=i.consoleLoggingLevel(),a?(a=+n.messageId,!o[a]&&r>=A.WARNING&&(i.warnToConsole(n.message),o[a]=!0)):r>=A.WARNING&&i.warnToConsole(n.message),i.logInternalMessage(e,n))},i.warnToConsole=function(e){var t,n=typeof console!==_?console:Ae("console");n&&(t="log",te(n[t=n.warn?"warn":t])&&n[t](e))},i.resetInternalMessageCount=function(){a=0,o={}},i.logInternalMessage=function(e,t){var n,r;a>=i.maxInternalMessageLimit()||(n=!0,r="AITR_"+t.messageId,o[r]?n=!1:o[r]=!0,n&&(e<=i.telemetryLoggingLevel()&&(i.queue.push(t),a++),a===i.maxInternalMessageLimit()&&(t=new ke(V.MessageLimitPerPVExceeded,e="Internal events throttle limit per PageView reached for this app.",!1),i.queue.push(t),i.warnToConsole(e))))}})},je="ctx",qe=(ze.ParentContextKey="parent",ze.ChildrenContextKey="childEvts",ze);function ze(e,a,t){var r,i=this,o=!1;i.start=me(),i.name=e,i.isAsync=t,i.isChildEvt=function(){return!1},te(a)&&(o=function(e){if(J)try{var t={enumerable:!0,configurable:!0,get:function(){return!r&&te(a)&&(r=a(),a=null),r}};return J(e,"payload",t),!0}catch(n){}return!1}(i)),i.getCtx=function(e){return e?(e===ze.ParentContextKey||e===ze.ChildrenContextKey?i:i[je]||{})[e]:null},i.setCtx=function(e,t){e&&(e===ze.ParentContextKey?(i[e]||(i.isChildEvt=function(){return!0}),i[e]=t):e===ze.ChildrenContextKey?i[e]=t:(i[je]=i[je]||{})[e]=t)},i.complete=function(){var e=0,t=i.getCtx(ze.ChildrenContextKey);if(oe(t))for(var n=0;n<t.length;n++){var r=t[n];r&&(e+=r.time)}i.time=me()-i.start,i.exTime=i.time-e,i.complete=function(){},!o&&te(a)&&(i.payload=a())}}var Ke="CoreUtils.doPerf";function Ge(e,t,n,r,a){if(e){var i=e;if(i=te(i.getPerfMgr)?i.getPerfMgr():i){var o,s=void 0,e=i.getCtx(Ke);try{if(s=i.create(t(),r,a))return e&&s.setCtx&&(s.setCtx(qe.ParentContextKey,e),e.getCtx&&e.setCtx&&((o=e.getCtx(qe.ChildrenContextKey))||(o=[],e.setCtx(qe.ChildrenContextKey,o)),o.push(s))),i.setCtx(Ke,s),n(s)}catch(l){s&&s.setCtx&&s.setCtx("exception",l)}finally{s&&i.fire(s),i.setCtx(Ke,e)}}}return n()}var Ve=function(a,t){var i=this,o=null,s=te(a.processTelemetry),l=te(a.setNextPlugin);i._hasRun=!1,i.getPlugin=function(){return a},i.getNext=function(){return o},i.setNext=function(e){o=e},i.processTelemetry=function(n,r){r=r||t;var e=a?a.identifier:"TelemetryPluginChain";Ge(r?r.core():null,function(){return e+":processTelemetry"},function(){if(a&&s){i._hasRun=!0;try{r.setNext(o),l&&a.setNextPlugin(o),o&&(o._hasRun=!1),a.processTelemetry(n,r)}catch(t){var e=o&&o._hasRun;o&&e||r.diagLog().throwInternal(A.CRITICAL,V.PluginException,"Plugin ["+a.identifier+"] failed during processTelemetry - "+t),o&&!e&&o.processTelemetry(n,r)}}else o&&(i._hasRun=!0,o.processTelemetry(n,r))},function(){return{item:n}},!n.sync)}};function He(e,t){var n=[];if(e&&0<e.length)for(var r=null,a=0;a<e.length;a++){var i=e[a];i&&te(i.processTelemetry)&&(i=new Ve(i,t),n.push(i),r&&r.setNext(i),r=i)}return 0<n.length?n[0]:null}var We=function Fr(e,a,n,t){var r,i,o,s,l=this,u=null;null!==t&&(e&&te(e.getPlugin)?u=function(e,t,n){var r=[],a=!n;if(e)for(;e;){var i=e.getPlugin();!a&&i!==n||(a=!0,r.push(i)),e=e.getNext()}return a||r.push(n),He(r,t)}(e,l,t||e.getPlugin()):t?(r=l,o=e,s=!1,(i=t)&&e&&(o=[],ce(e,function(e){!s&&e!==i||(s=!0,o.push(e))})),i&&!s&&(o=o||[]).push(i),u=He(o,r)):$(t)&&(u=He(e,l))),l.core=function(){return n},l.diagLog=function(){return Oe(n,a)},l.getCfg=function(){return a},l.getExtCfg=function(e,t){var n,r;return void 0===t&&(t={}),!a||(r=a.extensionConfig)&&e&&(n=r[e]),n||t},l.getConfig=function(e,t,n){var r;return void 0===n&&(n=!1),(e=l.getExtCfg(e,null))&&!Q(e[t])?r=e[t]:a&&!Q(a[t])&&(r=a[t]),Q(r)?n:r},l.hasNext=function(){return null!=u},l.getNext=function(){return u},l.setNext=function(e){u=e},l.processNext=function(e){var t=u;t&&(u=t.getNext(),t.processTelemetry(e,l))},l.createNew=function(e,t){return new Fr((e=void 0===e?null:e)||u,a,n,t)}},Xe="getPlugin",Ye=(Je.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},Je);function Je(){var i=this,o=!1,s=null,l=null;i.core=null,i.diagLog=function(e){return i._getTelCtx(e).diagLog()},i.isInitialized=function(){return o},i.setInitialized=function(e){o=e},i.setNextPlugin=function(e){l=e},i.processNext=function(e,t){t?t.processNext(e):l&&te(l.processTelemetry)&&l.processTelemetry(e,null)},i._getTelCtx=function(e){var t=e=void 0===e?null:e;return t||(e=s||new We(null,{},i.core),t=l&&l[Xe]?e.createNew(null,l[Xe]):e.createNew(null,l)),t},i._baseTelInit=function(e,t,n,r){e&&ye(e,"extensionConfig",[],null,Q),!r&&t&&(r=t.getProcessTelContext().getNext());var a=l;l&&l[Xe]&&(a=l[Xe]()),i.core=t,s=new We(r,e,t,a),o=!0}}var Ze={Attach:ne,AttachEvent:ne,Detach:re,DetachEvent:re},$e={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"};function Qe(e,t,n){var r,a,i=t.length,o=(t&&150<(t=fe(t.toString())).length&&(r=t.substring(0,150),e.throwInternal(A.WARNING,V.NameTooLong,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),r||t);if(o.length!==i){for(var s=0,l=o;n[l]!==undefined;)s++,l=o.substring(0,147)+(a="00"+s).substr(a.length-3);o=l}return o}function et(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=fe(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(A.WARNING,V.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function tt(e,t){return it(e,t,2048,V.UrlTooLong)}function nt(e,t){var n;return t&&32768<t.length&&(n=t.substring(0,32768),e.throwInternal(A.WARNING,V.MessageTruncated,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function rt(r,e){var a;return e&&(a={},ae(e,function(e,t){if(ee(t)&&Fe())try{t=Me().stringify(t)}catch(n){r.throwInternal(A.WARNING,V.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:n},!0)}t=et(r,t,8192),e=Qe(r,e,a),a[e]=t}),e=a),e}function at(n,e){var r;return e&&(r={},ae(e,function(e,t){e=Qe(n,e,r),r[e]=t}),e=r),e}function it(e,t,n,r){var a;return t&&(t=fe(t)).length>n&&(a=t.substring(0,n),e.throwInternal(A.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),a||t}function ot(e){var t=""+Math.floor((e=Math.round(e=isNaN(e)||e<0?0:e))/1e3)%60,n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,a=Math.floor(e/864e5),e=1===(e=""+e%1e3).length?"00"+e:2===e.length?"0"+e:e,t=t.length<2?"0"+t:t,n=n.length<2?"0"+n:n;return(0<a?a+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t+"."+e}function st(){var e=Le();return"sendBeacon"in e&&e.sendBeacon}var lt,ut="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ct="sampleRate",dt="ProcessLegacy",ft="http.method",pt="not_specified";(hn=lt=lt||{})[hn.LocalStorage=0]="LocalStorage",hn[hn.SessionStorage=1]="SessionStorage",(An={})[An.AI=0]="AI",An[An.AI_AND_W3C=1]="AI_AND_W3C",An[An.W3C=2]="W3C";var gt=undefined;function ht(e){try{if(Q(d()))return null;var t=new Date,n=Ae(e===lt.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(a){}return null}function mt(){return vt()?ht(lt.SessionStorage):null}function vt(){return gt=gt===undefined?!!ht(lt.SessionStorage):gt}function yt(e,t){var n=mt();if(null!==n)try{return n.getItem(t)}catch(r){gt=!1,e.throwInternal(A.WARNING,V.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+ve(r),{exception:Pe(r)})}return null}function It(e,t,n){var r=mt();if(null!==r)try{return r.setItem(t,n),1}catch(a){gt=!1,e.throwInternal(A.WARNING,V.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+ve(a),{exception:Pe(a)})}}var Ct=Ee()||{},St=0,Tt=[null,null,null,null,null],wt=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"];function xt(e){return~wt.indexOf(e.toLowerCase())}var bt,_t=(h(At,bt=function(){}),At);function At(){return bt.call(this)||this}var Nt,Rt=(h(Et,Nt=function(){this.ver=1,this.sampleRate=100,this.tags={}}),Et);function Et(e,t,n){var r=Nt.call(this)||this;return r.name=et(e,n)||pt,r.data=t,r.time=ue(new Date),r.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1},r}var Lt,Ft=(h(Mt,Lt=On=function(){this.ver=2,this.properties={},this.measurements={}}),Mt.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Mt.dataType="EventData",Mt);function Mt(e,t,n,r){var a=Lt.call(this)||this;return a.aiDataContract={ver:1,name:1,properties:0,measurements:0},a.name=et(e,t)||pt,a.properties=rt(e,n),a.measurements=at(e,r),a}var Pt=function(){},Dt=function(){this.hasFullStack=!0,this.parsedStack=[]},kt="<no_method>",Bt="error",Ot="stack",Ut="stackDetails",jt="errorSrc",qt="message",zt="description";function Kt(e,t){var n=e;return n&&!le(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),!t||n&&"{}"!==n||(n=te(e.toString)?e.toString():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function Gt(e,t){var n=e;return e&&((n=e[qt]||e[zt]||"")&&!le(n)&&(n=Kt(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),(t&&"String"!==t&&"Object"!==t&&"Error"!==t&&!~(n||"").indexOf(t)?t+": "+n:n)||""}function Vt(e){return e&&e.src&&le(e.src)&&e.obj&&oe(e.obj)}function Ht(e){var t=e||"",e=(t=le(t)?t:le(t[Ot])?t[Ot]:""+t).split("\n");return{src:t,obj:e}}function Wt(e){var t,n=null;if(e)try{e[Ot]?n=Ht(e[Ot]):e[Bt]&&e[Bt][Ot]?n=Ht(e[Bt][Ot]):e.exception&&e.exception[Ot]?n=Ht(e.exception[Ot]):Vt(e)?n=e:Vt(e[Ut])?n=e[Ut]:window.opera&&e[qt]?n=function(e){for(var t=[],n=e.split("\n"),r=0;r<n.length;r++){var a=n[r];n[r+1]&&(a+="@"+n[r+1],r++),t.push(a)}return{src:e,obj:t}}(e.message):le(e)?n=Ht(e):(t=e[qt]||e[zt]||"",le(e[jt])&&(t&&(t+="\n"),t+=" from "+e[jt]),t&&(n=Ht(t)))}catch(r){n=Ht(r)}return n||{src:"",obj:null}}function Xt(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,200})\(/.exec(e.constructor.toString()),t=n&&1<n.length?n[1]:""}catch(r){}return t}function Yt(e){if(e)try{if(!le(e)){var t=Xt(e),n=Kt(e,!1);return n&&"{}"!==n||(e[Bt]&&(t=Xt(e=e[Bt])),n=Kt(e,!0)),n.indexOf(t)&&"String"!==t?t+":"+n:n}}catch(r){}return""+(e||"")}var Jt,Zt=(h($t,Jt=function(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}),$t.CreateAutoException=function(e,t,n,r,a,i,o,s){var l=Xt(a||i||e);return{message:Gt(e,l),url:t,lineNumber:n,columnNumber:r,error:Yt(a||i||e),evt:Yt(i||e),typeName:l,stackDetails:Wt(o||a||i),errorSrc:s}},$t.CreateFromInterface=function(t,e,n,r){var a=e.exceptions&&de(e.exceptions,function(e){return en.CreateFromInterface(t,e)});return new $t(t,p({},e,{exceptions:a}),n,r)},$t.prototype.toInterface=function(){var e=this.exceptions,t=this.properties,n=this.measurements,r=this.severityLevel;this.ver;var a=this.problemGroup,i=this.id,o=this.isManual;return{ver:"4.0",exceptions:e instanceof Array&&de(e,function(e){return e.toInterface()})||undefined,severityLevel:r,properties:t,measurements:n,problemGroup:a,id:i,isManual:o}},$t.CreateSimpleException=function(e,t,n,r,a,i){return{exceptions:[{hasFullStack:!0,message:e,stack:a,typeName:t}]}},$t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",$t.dataType="ExceptionData",$t.formatError=Yt,$t);function $t(e,t,n,r,a,i){var o,s=Jt.call(this)||this;return s.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},ee(o=t)&&"ver"in o&&"exceptions"in o&&"properties"in o?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,Q(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new en(e,t,n=n||{})],s.properties=rt(e,n),s.measurements=at(e,r),a&&(s.severityLevel=a),i&&(s.id=i)),s}var Qt,en=(h(tn,Qt=Dt),tn.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&de(this.parsedStack,function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[Ot],parsedStack:e||undefined}},tn.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&de(t.parsedStack,function(e){return rn.CreateFromInterface(e)})||t.parsedStack;return new tn(e,p({},t,{parsedStack:n}))},tn);function tn(e,t,n){var u,r,a,i,o=Qt.call(this)||this;return o.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},ee(i=t)&&"hasFullStack"in i&&"typeName"in i?(o.typeName=t.typeName,o.message=t.message,o[Ot]=t[Ot],o.parsedStack=t.parsedStack,o.hasFullStack=t.hasFullStack):(i=(u=t)&&u.evt,se(u)||(u=u[Bt]||i||u),o.typeName=et(e,Xt(u))||pt,o.message=nt(e,Gt(t||u,o.typeName))||pt,u=t[Ut]||Wt(t),o.parsedStack=function(e){if((e=u.obj)&&0<e.length){var t=[],n=0,r=0;if(ce(e,function(e){e=e.toString(),rn.regex.test(e)&&(e=new rn(e,n++),r+=e.sizeInBytes,t.push(e))}),32768<r)for(var a=0,i=t.length-1,o=0,s=a,l=i;a<i;){if(32768<(o+=t[a].sizeInBytes+t[i].sizeInBytes)){t.splice(s,l-s+1);break}s=a,l=i,a++,i--}}return t}(),o[Ot]=(t=e,a="",(e=u)&&(e.obj?ce(e.obj,function(e){a+=e+"\n"}):a=e.src||""),!(u=a)||32768<(e=""+u).length&&(r=e.substring(0,32768),t.throwInternal(A.WARNING,V.ExceptionTruncated,"exception is too long, it has been truncated to 32768 characters.",{exception:u},!0)),r||u),o.hasFullStack=oe(o.parsedStack)&&0<o.parsedStack.length,n&&(n.typeName=n.typeName||o.typeName)),o}var nn,rn=(h(an,nn=Pt),an.CreateFromInterface=function(e){return new an(e,null)},an.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},an.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,an.baseSize=58,an);function an(e,t){var n,r=nn.call(this)||this;return r.sizeInBytes=0,r.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},"string"==typeof e?(n=e,r.level=t,r.method=kt,r.assembly=fe(n),r.fileName="",r.line=0,(n=n.match(an.regex))&&5<=n.length&&(r.method=fe(n[2])||r.method,r.fileName=fe(n[4]),r.line=parseInt(n[5])||0)):(r.level=e.level,r.method=e.method,r.assembly=e.assembly,r.fileName=e.fileName,r.line=e.line,r.sizeInBytes=0),r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=an.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}var on,sn=function(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}};(u=on={})[u.Measurement=0]="Measurement",u[u.Aggregation=1]="Aggregation";var ln,un=(h(cn,ln=function(){this.kind=on.Measurement}),cn);function cn(){var e=null!==ln&&ln.apply(this,arguments)||this;return e.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},e}var dn,fn=(h(pn,dn=sn),pn.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",pn.dataType="MetricData",pn);function pn(e,t,n,r,a,i,o,s){var l=dn.call(this)||this;l.aiDataContract={ver:1,metrics:1,properties:0};var u=new un;return u.count=0<r?r:undefined,u.max=isNaN(i)||null===i?undefined:i,u.min=isNaN(a)||null===a?undefined:a,u.name=et(e,t)||pt,u.value=n,l.metrics=[u],l.properties=rt(e,o),l.measurements=at(e,s),l}var gn,hn=(h(mn,gn=On),mn);function mn(){var e=gn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var vn,yn=(h(In,vn=hn),In.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",In.dataType="PageviewData",In);function In(e,t,n,r,a,i,o){var s=vn.call(this)||this;return s.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},s.id=o&&it(e,o,128,V.IdTooLong).toString(),s.url=tt(e,n),s.name=et(e,t)||pt,isNaN(r)||(s.duration=ot(r)),s.properties=rt(e,a),s.measurements=at(e,i),s}var Cn,Sn=(h(Tn,Cn=function(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}),Tn.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Tn.dataType="RemoteDependencyData",Tn);function Tn(e,t,n,r,a,i,o,s,l,u,c,d){void 0===l&&(l="Ajax");var f=Cn.call(this)||this;f.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},f.id=t,f.duration=ot(a),f.success=i,f.resultCode=o+"",f.type=et(e,l);var p,g,h,m,v,y,I,C,S,T,o=(p=e,t=s,o=i=a=r,i=(l=n)&&0<l.length?(g=l,T=(S=Tt)[C=St],Ct.createElement?S[C]||(T=S[C]=Ct.createElement("a")):T={host:(y=!0,I=null,!(v=h=g)||null!=(v=v.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<v.length&&le(v[2])&&0<v[2].length&&(I=v[2]||"",y&&2<v.length&&(y=(v[1]||"").toLowerCase(),v=v[3]||"",I+=v="http"==y&&":80"===v||"https"==y&&":443"===v?"":v)),(h=I||"")&&null!=(m=h.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i))&&3<m.length&&le(m[2])&&0<m[2].length?m[2]+(m[3]||""):h)},T.href=g,++C>=S.length&&(C=0),St=C,T=(s=T).host,i||(null!=s.pathname?("/"!=((n=0===s.pathname.length?"/":s.pathname)[0]||"")&&(n="/"+n),o=s.pathname,et(p,t?t+" "+n:n)):et(p,l))):T=a,{target:T,name:i,data:o});return f.data=tt(e,r)||o.data,f.target=et(e,o.target),u&&(f.target=f.target+" | "+u),f.name=et(e,o.name),f.properties=rt(e,c),f.measurements=at(e,d),f}var wn,xn=(h(bn,wn=function(){this.ver=2,this.properties={},this.measurements={}}),bn.envelopeType="Microsoft.ApplicationInsights.{0}.Message",bn.dataType="MessageData",bn);function bn(e,t,n,r,a){var i=wn.call(this)||this;return i.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},i.message=nt(e,t=t||pt),i.properties=rt(e,r),i.measurements=at(e,a),n&&(i.severityLevel=n),i}var _n,An=(h(Nn,_n=hn),Nn);function Nn(){var e=_n.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Rn,En=(h(Ln,Rn=An),Ln.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",Ln.dataType="PageviewPerformanceData",Ln);function Ln(e,t,n,r,a,i,o){var s=Rn.call(this)||this;return s.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},s.url=tt(e,n),s.name=et(e,t)||pt,s.properties=rt(e,a),s.measurements=at(e,i),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}var Fn,Mn=(h(Pn,Fn=_t),Pn);function Pn(e,t){var n=Fn.call(this)||this;return n.aiDataContract={baseType:1,baseData:1},n.baseType=e,n.baseData=t,n}function Dn(e){var t="ai."+e+".";return function(e){return t+e}}var kn,Bn,Dt=Dn("application"),Pt=Dn("device"),u=Dn("location"),sn=Dn("operation"),On=Dn("session"),hn=Dn("user"),An=Dn("cloud"),_t=Dn("internal"),Un=(Bn={applicationVersion:Dt("ver"),applicationBuild:Dt("build"),applicationTypeId:Dt("typeId"),applicationId:Dt("applicationId"),applicationLayer:Dt("layer"),deviceId:Pt("id"),deviceIp:Pt("ip"),deviceLanguage:Pt("language"),deviceLocale:Pt("locale"),deviceModel:Pt("model"),deviceFriendlyName:Pt("friendlyName"),deviceNetwork:Pt("network"),deviceNetworkName:Pt("networkName"),deviceOEMName:Pt("oemName"),deviceOS:Pt("os"),deviceOSVersion:Pt("osVersion"),deviceRoleInstance:Pt("roleInstance"),deviceRoleName:Pt("roleName"),deviceScreenResolution:Pt("screenResolution"),deviceType:Pt("type"),deviceMachineName:Pt("machineName"),deviceVMName:Pt("vmName"),deviceBrowser:Pt("browser"),deviceBrowserVersion:Pt("browserVersion"),locationIp:u("ip"),locationCountry:u("country"),locationProvince:u("province"),locationCity:u("city"),operationId:sn("id"),operationName:sn("name"),operationParentId:sn("parentId"),operationRootId:sn("rootId"),operationSyntheticSource:sn("syntheticSource"),operationCorrelationVector:sn("correlationVector"),sessionId:On("id"),sessionIsFirst:On("isFirst"),sessionIsNew:On("isNew"),userAccountAcquisitionDate:hn("accountAcquisitionDate"),userAccountId:hn("accountId"),userAgent:hn("userAgent"),userId:hn("id"),userStoreRegion:hn("storeRegion"),userAuthUserId:hn("authUserId"),userAnonymousUserAcquisitionDate:hn("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:hn("authUserAcquisitionDate"),cloudName:An("name"),cloudRole:An("role"),cloudRoleVer:An("roleVer"),cloudRoleInstance:An("roleInstance"),cloudEnvironment:An("environment"),cloudLocation:An("location"),cloudDeploymentUnit:An("deploymentUnit"),internalNodeName:_t("nodeName"),internalSdkVersion:_t("sdkVersion"),internalAgentVersion:_t("agentVersion"),internalSnippet:_t("snippet"),internalSdkSrc:_t("sdkSrc")},h(jn,kn=function(){var n=this;ae(Bn,function(e,t){n[e]=t})}),jn);function jn(){return kn.call(this)||this}var qn=new Un,zn="AppInsightsChannelPlugin",Kn=function Mr(n){var r=[];G(Mr,this,function(t){t.enqueue=function(e){r.push(e)},t.count=function(){return r.length},t.clear=function(){r.length=0},t.getItems=function(){return r.slice(0)},t.batchPayloads=function(e){return e&&0<e.length?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},t.markAsSent=function(e){t.clear()},t.clearSent=function(e){}})},Gn=(Vn.BUFFER_KEY="AI_buffer",Vn.SENT_BUFFER_KEY="AI_sentBuffer",Vn.MAX_BUFFER_SIZE=2e3,Vn);function Vn(o,s){var l,u=!1;G(Vn,this,function(e){var t=a(Vn.BUFFER_KEY),n=a(Vn.SENT_BUFFER_KEY);function r(t,e){var n=[];return ce(e,function(e){te(e)||-1!==function(e,t){for(var n=e.length,r=0;r<n;r++)if(r in e&&e[r]===t)return r;return-1}(t,e)||n.push(e)}),n}function a(e){try{var e=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+e:e,t=yt(o,e);if(t){var n=Me().parse(t);if((n=le(n)?Me().parse(n):n)&&oe(n))return n}}catch(r){o.throwInternal(A.CRITICAL,V.FailedToRestoreStorageBuffer," storage key: "+e+", "+ve(r),{exception:Pe(r)})}return[]}function i(e,t){try{var e=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+e:e,n=JSON.stringify(t);It(o,e,n)}catch(r){It(o,e,JSON.stringify([])),o.throwInternal(A.WARNING,V.FailedToSetStorageBuffer," storage key: "+e+", "+ve(r)+". Buffer cleared",{exception:Pe(r)})}}(l=t.concat(n)).length>Vn.MAX_BUFFER_SIZE&&(l.length=Vn.MAX_BUFFER_SIZE),i(Vn.SENT_BUFFER_KEY,[]),i(Vn.BUFFER_KEY,l),e.enqueue=function(e){l.length>=Vn.MAX_BUFFER_SIZE?u||(o.throwInternal(A.WARNING,V.SessionStorageBufferFull,"Maximum buffer size reached: "+l.length,!0),u=!0):(l.push(e),i(Vn.BUFFER_KEY,l))},e.count=function(){return l.length},e.clear=function(){l=[],i(Vn.BUFFER_KEY,[]),i(Vn.SENT_BUFFER_KEY,[]),u=!1},e.getItems=function(){return l.slice(0)},e.batchPayloads=function(e){return e&&0<e.length?s.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(e){l=r(e,l),i(Vn.BUFFER_KEY,l);var t=a(Vn.SENT_BUFFER_KEY);t instanceof Array&&e instanceof Array&&((t=t.concat(e)).length>Vn.MAX_BUFFER_SIZE&&(o.throwInternal(A.CRITICAL,V.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+t.length,!0),t.length=Vn.MAX_BUFFER_SIZE),i(Vn.SENT_BUFFER_KEY,t))},e.clearSent=function(e){e=r(e,e=a(Vn.SENT_BUFFER_KEY)),i(Vn.SENT_BUFFER_KEY,e)}})}var Hn="baseType",Wn="baseData",Xn="properties";function Yn(e,t,n){return ye(e,t,n,Ie)}var Jn=(Zn.extractPropsAndMeasurements=function(e,n,r){Q(e)||ae(e,function(e,t){"number"==typeof t?r[e]=t:le(t)?n[e]=t:Fe()&&(n[e]=Me().stringify(t))})},Zn.createEnvelope=function(e,t,n,r){return Yn(r=new Rt(e,r,t),"sampleRate",n[ct]),(n[Wn]||{}).startTime&&(r.time=ue(n[Wn].startTime)),r.iKey=n.iKey,t=n.iKey.replace(/-/g,""),r.name=r.name.replace("{0}",t),Zn.extractPartAExtensions(n,r),n.tags=n.tags||[],Ce(r)},Zn.extractPartAExtensions=function(e,t){var n=t.tags=t.tags||{},r=e.ext=e.ext||{},a=e.tags=e.tags||[],i=r.user;i&&(Yn(n,qn.userAuthUserId,i.authId),Yn(n,qn.userId,i.id||i.localId)),(i=r.app)&&Yn(n,qn.sessionId,i.sesId),(i=r.device)&&(Yn(n,qn.deviceId,i.id||i.localId),Yn(n,qn.deviceType,i.deviceClass),Yn(n,qn.deviceIp,i.ip),Yn(n,qn.deviceModel,i.model),Yn(n,qn.deviceType,i.deviceType)),(i=e.ext.web)&&(Yn(n,qn.deviceLanguage,i.browserLang),Yn(n,qn.deviceBrowserVersion,i.browserVer),Yn(n,qn.deviceBrowser,i.browser),Yn(e=(e=(e=t.data=t.data||{})[Wn]=e[Wn]||{})[Xn]=e[Xn]||{},"domain",i.domain),Yn(e,"isManual",i.isManual?"true":null),Yn(e,"screenRes",i.screenRes),Yn(e,"userConsent",i.userConsent?"true":null)),(i=r.os)&&Yn(n,qn.deviceOS,i.name),(r=r.trace)&&(Yn(n,qn.operationParentId,r.parentID),Yn(n,qn.operationName,r.name),Yn(n,qn.operationId,r.traceID));for(var o={},s=a.length-1;0<=s;s--)ae(a[s],function(e,t){o[e]=t}),a.splice(s,1);ae(a,function(e,t){o[e]=t}),(n=p({},n,o))[qn.internalSdkVersion]||(n[qn.internalSdkVersion]="javascript:"+Zn.Version),t.tags=Ce(n)},Zn.prototype.Init=function(e,t){this._logger=e,Q(t[Wn])&&this._logger.throwInternal(A.CRITICAL,V.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},Zn.Version="2.6.4",Zn);function Zn(){}var $n,Qn=(h(er,$n=Jn),er.prototype.Create=function(e,t){$n.prototype.Init.call(this,e,t);var n=t[Wn].measurements||{},r=t[Wn][Xn]||{};Jn.extractPropsAndMeasurements(t.data,r,n);var a=t[Wn];if(Q(a))return e.warnToConsole("Invalid input for dependency data"),null;var i=a[Xn]&&a[Xn][ft]?a[Xn][ft]:"GET",n=new Sn(e,a.id,a.target,a.name,a.duration,a.success,a.responseCode,i,a.type,a.correlationContext,r,n),n=new Mn(Sn.dataType,n);return Jn.createEnvelope(e,Sn.envelopeType,t,n)},er.DependencyEnvelopeCreator=new er,er);function er(){return null!==$n&&$n.apply(this,arguments)||this}var tr,nr=(h(rr,tr=Jn),rr.prototype.Create=function(e,t){tr.prototype.Init.call(this,e,t);var n={},r={};t[Hn]!==Ft.dataType&&(n.baseTypeSource=t[Hn]),t[Hn]===Ft.dataType?(n=t[Wn][Xn]||{},r=t[Wn].measurements||{}):t[Wn]&&Jn.extractPropsAndMeasurements(t[Wn],n,r),Jn.extractPropsAndMeasurements(t.data,n,r);var a=t[Wn].name,r=new Ft(e,a,n,r),r=new Mn(Ft.dataType,r);return Jn.createEnvelope(e,Ft.envelopeType,t,r)},rr.EventEnvelopeCreator=new rr,rr);function rr(){return null!==tr&&tr.apply(this,arguments)||this}var ar,ir=(h(or,ar=Jn),or.prototype.Create=function(e,t){ar.prototype.Init.call(this,e,t);var n=t[Wn].measurements||{},r=t[Wn][Xn]||{};Jn.extractPropsAndMeasurements(t.data,r,n);var a=t[Wn],n=Zt.CreateFromInterface(e,a,r,n),n=new Mn(Zt.dataType,n);return Jn.createEnvelope(e,Zt.envelopeType,t,n)},or.ExceptionEnvelopeCreator=new or,or);function or(){return null!==ar&&ar.apply(this,arguments)||this}var sr,lr=(h(ur,sr=Jn),ur.prototype.Create=function(e,t){sr.prototype.Init.call(this,e,t);var n=t[Wn],r=n[Xn]||{},a=n.measurements||{};return Jn.extractPropsAndMeasurements(t.data,r,a),a=new fn(e,n.name,n.average,n.sampleCount,n.min,n.max,r,a),a=new Mn(fn.dataType,a),Jn.createEnvelope(e,fn.envelopeType,t,a)},ur.MetricEnvelopeCreator=new ur,ur);function ur(){return null!==sr&&sr.apply(this,arguments)||this}var cr,dr=(h(fr,cr=Jn),fr.prototype.Create=function(e,t){cr.prototype.Init.call(this,e,t);var n,r="duration";Q(o=t[Wn])||Q(o[Xn])||Q(o[Xn][r])?Q(t.data)||Q(t.data[r])||(n=t.data[r],delete t.data[r]):(n=o[Xn][r],delete o[Xn][r]);var a=t[Wn];((t.ext||{}).trace||{}).traceID&&(l=t.ext.trace.traceID);var i=a.id||l,o=a.name,r=a.uri,s=a[Xn]||{},l=a.measurements||{};return Q(a.refUri)||(s.refUri=a.refUri),Q(a.pageType)||(s.pageType=a.pageType),Q(a.isLoggedIn)||(s.isLoggedIn=a.isLoggedIn.toString()),Q(a[Xn])||ae(a[Xn],function(e,t){s[e]=t}),Jn.extractPropsAndMeasurements(t.data,s,l),i=new yn(e,o,r,n,s,l,i),i=new Mn(yn.dataType,i),Jn.createEnvelope(e,yn.envelopeType,t,i)},fr.PageViewEnvelopeCreator=new fr,fr);function fr(){return null!==cr&&cr.apply(this,arguments)||this}var pr,gr=(h(hr,pr=Jn),hr.prototype.Create=function(e,t){pr.prototype.Init.call(this,e,t);var n=t[Wn],r=n.name,a=n.uri||n.url,i=n[Xn]||{},o=n.measurements||{};return Jn.extractPropsAndMeasurements(t.data,i,o),n=new En(e,r,a,undefined,i,o,n),n=new Mn(En.dataType,n),Jn.createEnvelope(e,En.envelopeType,t,n)},hr.PageViewPerformanceEnvelopeCreator=new hr,hr);function hr(){return null!==pr&&pr.apply(this,arguments)||this}var mr,vr=(h(yr,mr=Jn),yr.prototype.Create=function(e,t){mr.prototype.Init.call(this,e,t);var n=t[Wn].message,r=t[Wn].severityLevel,a=t[Wn][Xn]||{},i=t[Wn].measurements||{};return Jn.extractPropsAndMeasurements(t.data,a,i),i=new xn(e,n,r,a,i),i=new Mn(xn.dataType,i),Jn.createEnvelope(e,xn.envelopeType,t,i)},yr.TraceEnvelopeCreator=new yr,yr);function yr(){return null!==mr&&mr.apply(this,arguments)||this}var Ir=function Pr(d){G(Pr,this,function(e){function u(o,s){var e="__aiCircularRefCheck",l={};if(!o)return d.throwInternal(A.CRITICAL,V.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:s},!0),l;if(o[e])return d.throwInternal(A.WARNING,V.CircularReferenceDetected,"Circular reference detected while serializing object",{name:s},!0),l;if(o.aiDataContract)return o[e]=!0,ae(o.aiDataContract,function(e,t){var n=te(t)?1&t():1&t,r=te(t)?4&t():4&t,a=2&t,i=o[e]!==undefined,t=ee(o[e])&&null!==o[e];!n||i||a?r||(r=void 0,(r=t?(a?c:u)(o[e],e):o[e])!==undefined&&(l[e]=r)):d.throwInternal(A.CRITICAL,V.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:e,name:s})}),delete o[e],l;if("measurements"===s)l=n(o,"number",s);else if("properties"===s)l=n(o,"string",s);else if("tags"===s)l=n(o,"string",s);else if(oe(o))l=c(o,s);else{d.throwInternal(A.WARNING,V.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:s},!0);try{Me().stringify(o),l=o}catch(t){d.throwInternal(A.CRITICAL,V.CannotSerializeObject,t&&te(t.toString)?t.toString():"Error serializing object",null,!0)}}return l}function c(e,t){if(e)if(oe(e))for(var n=[],r=0;r<e.length;r++){var a=u(e[r],t+"["+r+"]");n.push(a)}else d.throwInternal(A.CRITICAL,V.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n}function n(e,n,r){var a;return e&&(a={},ae(e,function(e,t){"string"===n?t===undefined?a[e]="undefined":null===t?a[e]="null":t.toString?a[e]=t.toString():a[e]="invalid field: toString() is not defined.":"number"===n?t===undefined?a[e]="undefined":a[e]=null===t?"null":isNaN(t=parseFloat(t))?"NaN":t:(a[e]="invalid field: "+r+" is of unknown type.",d.throwInternal(A.CRITICAL,a[e],null,!0))})),a}e.serialize=function(e){e=u(e,"root");try{return Me().stringify(e)}catch(t){d.throwInternal(A.CRITICAL,V.CannotSerializeObject,t&&te(t.toString)?t.toString():"Error serializing object",null,!0)}}})};function Cr(){var o=Re(),s=Ee(),l=!1,u=!0;G(Cr,this,function(e){try{var t,n;o&&Ze.Attach(o,"online",r)&&(Ze.Attach(o,"offline",a),l=!0),s&&($((t=s.body||s).ononline)||(t.ononline=r,t.onoffline=a,l=!0)),!l||(n=Le())&&!Q(n.onLine)&&(u=n.onLine)}catch(i){l=!1}function r(){u=!0}function a(){u=!1}e.isListening=l,e.isOnline=function(){var e=!0,t=Le();return l?e=u:t&&!Q(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}})}var Sr=Cr.Offline=new Cr,Tr=(wr.prototype.getHashCodeScore=function(e){return this.getHashCode(e)/wr.INT_MAX_VALUE*100},wr.prototype.getHashCode=function(e){if(""===e)return 0;for(;e.length<wr.MIN_INPUT_LENGTH;)e=e.concat(e);for(var t=5381,n=0;n<e.length;++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},wr.INT_MAX_VALUE=2147483647,wr.MIN_INPUT_LENGTH=8,wr);function wr(){}var xr=(br.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},br);function br(){this.hashCodeGeneragor=new Tr,this.keys=new Un}var _r=(Ar.prototype.isSampledIn=function(e){var t=this.sampleRate;return null===t||t===undefined||100<=t||e.baseType===fn.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},Ar);function Ar(e,t){this.INT_MAX_VALUE=2147483647,this._logger=t||Oe(null),(100<e||e<0)&&(this._logger.throwInternal(A.WARNING,V.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new xr}function Nr(e){try{return e.responseText}catch(t){}return null}var Rr,Ye=(h(Er,Rr=Ye),Er.constructEnvelope=function(e,t,n){var r=t===e.iKey||Q(t)?e:p({},e,{iKey:t});switch(r.baseType){case Ft.dataType:return nr.EventEnvelopeCreator.Create(n,r);case xn.dataType:return vr.TraceEnvelopeCreator.Create(n,r);case yn.dataType:return dr.PageViewEnvelopeCreator.Create(n,r);case En.dataType:return gr.PageViewPerformanceEnvelopeCreator.Create(n,r);case Zt.dataType:return ir.ExceptionEnvelopeCreator.Create(n,r);case fn.dataType:return lr.MetricEnvelopeCreator.Create(n,r);case Sn.dataType:return Qn.DependencyEnvelopeCreator.Create(n,r);default:return nr.EventEnvelopeCreator.Create(n,r)}},Er._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){return undefined},namePrefix:function(){return undefined},samplingPercentage:function(){return 100},customHeaders:function(){return undefined}}},Er._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:undefined,emitLineDelimitedJson:undefined,maxBatchInterval:undefined,maxBatchSizeInBytes:undefined,disableTelemetry:undefined,enableSessionStorageBuffer:undefined,isRetryDisabled:undefined,isBeaconApiDisabled:undefined,onunloadDisableBeacon:undefined,instrumentationKey:undefined,namePrefix:undefined,samplingPercentage:undefined,customHeaders:undefined}},Er);function Er(){var I,C,S,T,w,x=Rr.call(this)||this;x.priority=1001,x.identifier=zn,x._XMLHttpRequestSupported=!1;var b={};return G(Er,x,function(l,o){function e(){!function(){throw Error("Method not implemented.")}()}function i(e,t,n,r,a,i){var o=null;l._appId||(o=f(i))&&o.appId&&(l._appId=o.appId),(e<200||300<=e)&&0!==e?(301!==e&&307!==e&&308!==e||s(n))&&!l._senderConfig.isRetryDisabled()&&h(e)?(p(t),l.diagLog().throwInternal(A.WARNING,V.TransmissionFailed,". Response code "+e+". Will retry to send "+t.length+" items.")):l._onError(t,a):Sr.isOffline()?l._senderConfig.isRetryDisabled()||(p(t,10),l.diagLog().throwInternal(A.WARNING,V.TransmissionFailed,". Offline - Response Code: "+e+". Offline status: "+Sr.isOffline()+". Will retry to send "+t.length+" items.")):(s(n),206===e?(o=o||f(i))&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(t,o):l._onError(t,a):(I=0,l._onSuccess(t,r)))}function s(e){return!(10<=w)&&!Q(e)&&""!==e&&e!==l._senderConfig.endpointUrl()&&(l._senderConfig.endpointUrl=function(){return e},++w,1)}function u(e,t){var n=l._senderConfig.endpointUrl(),r=l._buffer.batchPayloads(e),r=new Blob([r],{type:"text/plain;charset=UTF-8"});Le().sendBeacon(n,r)?(l._buffer.markAsSent(e),l._onSuccess(e,e.length)):(c(e,!0),l.diagLog().throwInternal(A.WARNING,V.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function c(t,e){var n=new XMLHttpRequest,r=l._senderConfig.endpointUrl();try{n[ut]=!0}catch(a){}n.open("POST",r,e),n.setRequestHeader("Content-type","application/json"),xt(r)&&n.setRequestHeader($e.sdkContextHeader,$e.sdkContextHeaderAppIdRequest),ce(he(b),function(e){n.setRequestHeader(e,b[e])}),n.onreadystatechange=function(){return l._xhrReadyStateChange(n,t,t.length)},n.onerror=function(e){return l._onError(t,m(n),e)},r=l._buffer.batchPayloads(t),n.send(r),l._buffer.markAsSent(t)}function d(n,e){var t=l._senderConfig.endpointUrl(),r=l._buffer.batchPayloads(n),r=new Blob([r],{type:"text/plain;charset=UTF-8"}),a=new Headers;xt(t)&&a.append($e.sdkContextHeader,$e.sdkContextHeaderAppIdRequest),ce(he(b),function(e){a.append(e,b[e])}),r=new Request(t,{method:"POST",headers:a,body:r}),fetch(r).then(function(t){if(!t.ok)throw Error(t.statusText);t.text().then(function(e){i(t.status,n,t.url,n.length,t.statusText,e)}),l._buffer.markAsSent(n)})["catch"](function(e){l._onError(n,e.message)})}function f(e){try{if(e&&""!==e){var t=Me().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(n){l.diagLog().throwInternal(A.CRITICAL,V.InvalidBackendResponse,"Cannot parse the response. "+ve(n),{response:e})}return null}function p(e,t){if(void 0===t&&(t=1),e&&0!==e.length){l._buffer.clearSent(e),I++;for(var n=0,r=e;n<r.length;n++){var a=r[n];l._buffer.enqueue(a)}i=I<=1?10:(i=1+Math.floor((Math.pow(2,I)-1)/2*Math.random()*10),Math.max(Math.min(i*=t,3600),10)),i=me()+1e3*i,C=i,g()}var i}function g(){var e;S||(e=C?Math.max(0,C-me()):0,e=Math.max(l._senderConfig.maxBatchInterval(),e),S=setTimeout(function(){l.triggerSend(!0,null,1)},e))}function h(e){return 408===e||429===e||500===e||503===e}function m(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+Nr(e)||e.response||"":t}function v(t,e){var n=Re(),r=new XDomainRequest;if(r.onload=function(){return l._xdrOnLoad(r,t)},r.onerror=function(e){return l._onError(t,a(r),e)},n=n&&n.location&&n.location.protocol||"",l._senderConfig.endpointUrl().lastIndexOf(n,0))return l.diagLog().throwInternal(A.WARNING,V.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void l._buffer.clear();n=l._senderConfig.endpointUrl().replace(/^(https?:)/,""),r.open("POST",n),n=l._buffer.batchPayloads(t),r.send(n),l._buffer.markAsSent(t)}function a(e,t){return e?"XDomainRequest,Response:"+Nr(e)||"":t}function y(e,t){var n=l.core[n="getNotifyMgr"]?l.core[n]():l.core._notificationManager;if(n&&n.eventsSendRequest)try{n.eventsSendRequest(e,t)}catch(r){l.diagLog().throwInternal(A.CRITICAL,V.NotificationException,"send request notification failed: "+ve(r),{exception:Pe(r)})}}l.pause=e,l.resume=e,l.flush=function(){try{l.triggerSend(!0,null,1)}catch(e){l.diagLog().throwInternal(A.CRITICAL,V.FlushFailed,"flush failed, telemetry will not be collected: "+ve(e),{exception:Pe(e)})}},l.onunloadFlush=function(){if(!1!==l._senderConfig.onunloadDisableBeacon()&&!1!==l._senderConfig.isBeaconApiDisabled()||!st())l.flush();else try{l.triggerSend(!0,u,2)}catch(e){l.diagLog().throwInternal(A.CRITICAL,V.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ve(e),{exception:Pe(e)})}},l.teardown=e,l.addHeader=function(e,t){b[e]=t},l.initialize=function(e,t,n,r){o.initialize(e,t,n,r);var a=l._getTelCtx(),i=l.identifier;T=new Ir(t.logger),C=null,I=0,l._sender=null,w=0,t=Er._getDefaultAppInsightsChannelConfig(),l._senderConfig=Er._getEmptyAppInsightsChannelConfig(),ae(t,function(e,t){l._senderConfig[e]=function(){return a.getConfig(i,e,t())}}),l._buffer=l._senderConfig.enableSessionStorageBuffer()&&vt()?new Gn(l.diagLog(),l._senderConfig):new Kn(l._senderConfig),l._sample=new _r(l._senderConfig.samplingPercentage(),l.diagLog()),!Q((t=e).disableInstrumentationKeyValidation)&&t.disableInstrumentationKeyValidation||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(t.instrumentationKey)||l.diagLog().throwInternal(A.CRITICAL,V.InvalidInstrumentationKey,"Invalid Instrumentation key "+e.instrumentationKey),!xt(l._senderConfig.endpointUrl())&&l._senderConfig.customHeaders()&&0<l._senderConfig.customHeaders().length&&ce(l._senderConfig.customHeaders(),function(e){x.addHeader(e.header,e.value)}),!l._senderConfig.isBeaconApiDisabled()&&st()?l._sender=u:(e=Ae("XMLHttpRequest"))?"withCredentials"in new e?(l._sender=c,l._XMLHttpRequestSupported=!0):typeof XDomainRequest!==_&&(l._sender=v):Ae("fetch")&&(l._sender=d)},l.processTelemetry=function(e,n){n=l._getTelCtx(n);try{if(l._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(A.CRITICAL,V.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(A.CRITICAL,V.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!l._sender)return void n.diagLog().throwInternal(A.CRITICAL,V.SenderNotInitialized,"Sender was not initialized");if(!l._sample.isSampledIn(e))return void n.diagLog().throwInternal(A.WARNING,V.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:l._sample.sampleRate});e[ct]=l._sample.sampleRate;var r=Er.constructEnvelope(e,l._senderConfig.instrumentationKey(),n.diagLog());if(!r)return void n.diagLog().throwInternal(A.CRITICAL,V.CreateEnvelopeError,"Unable to create an AppInsights envelope");var a=!1;if(e.tags&&e.tags[dt]&&(ce(e.tags[dt],function(e){try{e&&!1===e(r)&&(a=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(t){n.diagLog().throwInternal(A.CRITICAL,V.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+ve(t),{exception:Pe(t)},!0)}}),delete e.tags[dt]),a)return;var t=T.serialize(r),i=l._buffer.getItems(),o=l._buffer.batchPayloads(i);o&&o.length+t.length>l._senderConfig.maxBatchSizeInBytes()&&l.triggerSend(!0,null,10),l._buffer.enqueue(t),g()}catch(s){n.diagLog().throwInternal(A.WARNING,V.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ve(s),{exception:Pe(s)})}l.processNext(e,n)},l._xhrReadyStateChange=function(e,t,n){4===e.readyState&&i(e.status,t,e.responseURL,n,m(e),Nr(e)||e.response)},l.triggerSend=function(e,t,n){void 0===e&&(e=!0);try{l._senderConfig.disableTelemetry()?l._buffer.clear():0<l._buffer.count()&&(a=l._buffer.getItems(),y(n||0,e),t?t.call(x,a,e):l._sender(a,e)),clearTimeout(S),C=S=null}catch(i){(!(e=ie(r=((r=(r=void 0===r?null:r)?r:(a=Le()||{})?(a.userAgent||"").toLowerCase():"")||"").toLowerCase(),be)?parseInt(r.split(be)[1]):ie(r,_e)&&(r=parseInt(r.split(_e)[1]))?r+4:null)||9<e)&&l.diagLog().throwInternal(A.CRITICAL,V.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+ve(i),{exception:Pe(i)})}var r,a},l._onError=function(e,t,n){l.diagLog().throwInternal(A.WARNING,V.OnError,"Failed to send telemetry.",{message:t}),l._buffer.clearSent(e)},l._onPartialSuccess=function(e,t){for(var n=[],r=[],a=0,i=t.errors.reverse();a<i.length;a++){var o=i[a],s=e.splice(o.index,1)[0];(h(o.statusCode)?r:n).push(s)}0<e.length&&l._onSuccess(e,t.itemsAccepted),0<n.length&&l._onError(n,m(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),0<r.length&&(p(r),l.diagLog().throwInternal(A.WARNING,V.TransmissionFailed,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+r.length+" our of "+t.itemsReceived+" items"))},l._onSuccess=function(e,t){l._buffer.clearSent(e)},l._xdrOnLoad=function(e,t){var n=Nr(e);!e||n+""!="200"&&""!==n?(n=f(n))&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(t,n):l._onError(t,a(e)):(I=0,l._onSuccess(t,0))}}),x}e.Sender=Ye,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch(a){}typeof n.value!==undefined&&(e[t]=n.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
