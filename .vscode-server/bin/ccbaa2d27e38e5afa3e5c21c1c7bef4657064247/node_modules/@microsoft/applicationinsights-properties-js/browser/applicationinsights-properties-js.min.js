/*!
 * Application Insights JavaScript SDK - Properties Plugin, 2.6.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,n=function(e){"use strict";var a="function",s="object",o="undefined",r="prototype",i="hasOwnProperty",t=Object,n=t[r],u=t.create,c=t.defineProperty,l=n[i];function f(){return typeof globalThis!==o&&globalThis?globalThis:typeof self!==o&&self?self:typeof window!==o&&window?window:typeof global!==o&&global?global:null}function d(e){throw new TypeError(e)}(f()||{}).Symbol,(f()||{}).Reflect;var g=function(e,n){return(g=t.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n[i](t)&&(e[t]=n[t])})(e,n)};function p(e,n){function t(){this.constructor=e}typeof n!==a&&null!==n&&d("Class extends value "+n+" is not a constructor or null"),g(e,n),e[r]=null===n?function(e){if(u)return u(e);if(null==e)return{};var n=typeof e;function t(){}return n!==s&&n!==a&&d("Object prototype may only be an Object:"+e),t[r]=e,new t}(n):(t[r]=n[r],new t)}var v,h="constructor",m="prototype",I="function",C="_dynInstFuncs",y="_isDynProxy",x="_dynClass",w="_dynCls$",S="_dynInstChk",N=S,T="_dfOpts",A="_unknown_",b="__proto__",k="useBaseInst",P="setInstFuncs",M=Object,L=M.getPrototypeOf,R=0;function D(e,n){return e&&M[m].hasOwnProperty.call(e,n)}function E(e){return e&&(e===M[m]||e===Array[m])}function F(e){return E(e)||e===Function[m]}function _(e){if(e){if(L)return L(e);if(e=e[b]||e[m]||(e[h]?e[h][m]:null))return e}return null}function U(e,n){var t=[],o=M.getOwnPropertyNames;if(o)t=o(e);else for(var r in e)"string"==typeof r&&D(e,r)&&t.push(r);if(t&&0<t.length)for(var i=0;i<t.length;i++)n(t[i])}function O(e,n,t){return n!==h&&typeof e[n]===I&&(t||D(e,n))}function V(e){throw new TypeError("DynamicProto: "+e)}function B(e,n){for(var t=e.length-1;0<=t;t--)if(e[t]===n)return 1}function j(e,n){return D(e,m)?e.name||n||A:((e||{})[h]||{}).name||n||A}function W(e,o,n,t){D(e,m)||V("theClass is an invalid class definition.");var r=e[m];!function(e){if(L)for(var n=[],t=_(o);t&&!F(t)&&!B(n,t);){if(t===e)return 1;n.push(t),t=_(t)}}(r)&&V("["+j(e)+"] is not in class hierarchy of ["+j(o)+"]");var i=null;D(r,x)?i=r[x]:(i=w+j(e,"_")+"$"+R,R++,r[x]=i);var a=W[T],s=!!a[k];s&&t&&t[k]!==undefined&&(s=!!t[k]);var u,c,l,f,d,g,e=(c={},U(u=o,function(e){!c[e]&&O(u,e,!1)&&(c[e]=u[e])}),c);n(o,function(e,n,t,i){function o(e,n,t){var o,r=n[t];return r[y]&&i&&!1!==(o=e[C]||{})[N]&&(r=(o[n[x]]||{})[t]||r),function(){return r.apply(e,arguments)}}var r={};U(t,function(e){r[e]=o(n,t,e)});for(var a=_(e),s=[];a&&!F(a)&&!B(s,a);)U(a,function(e){!r[e]&&O(a,e,!L)&&(r[e]=o(n,a,e))}),s.push(a),a=_(a);return r}(r,o,e,s)),a=!!L&&!!a[P],l=r,i=i,f=o,d=e,t=!1!==(a=a&&t?!!t[P]:a),E(l)||(a=f[C]=f[C]||{},g=a[i]=a[i]||{},!1!==a[N]&&(a[N]=!!t),U(f,function(e){var t,o,r;O(f,e,!1)&&f[e]!==d[e]&&(g[e]=f[e],delete f[e],D(l,e)&&(!l[e]||l[e][y])||(l[e]=(t=l,o=e,(r=function(){var e,n;return(function(e,n,t,o){var r=null;if(e&&D(t,x)){var i=e[C]||{};if((r=(i[t[x]]||{})[n])||V("Missing ["+n+"] "+I),!r[S]&&!1!==i[N]){for(var a=!D(e,n),s=_(e),u=[];a&&s&&!F(s)&&!B(u,s);){var c=s[n];if(c){a=c===o;break}u.push(s),s=_(s)}try{a&&(e[n]=r),r[S]=1}catch(l){i[N]=!1}}}return r}(this,o,t,r)||(typeof(n=(n=t[e=o])===r?_(t)[e]:n)!==I&&V("["+e+"] is not a "+I),n)).apply(this,arguments)})[y]=1,r)))}))}W[T]={setInstFuncs:!0,useBaseInst:!0},(Gn=v=v||{})[Gn.CRITICAL=1]="CRITICAL",Gn[Gn.WARNING=2]="WARNING";var q={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},G=c;function K(e){return n.toString.call(e)}function z(e){return e===undefined||typeof e===o}function H(e){return null===e||z(e)}function J(e){return!H(e)}function Z(e){return typeof e===a}function X(e,n){if(e)for(var t in e)l.call(e,t)&&n.call(e,t,e[t])}function $(e,n){return!(!e||!n||!~e.indexOf(n))}function Q(e){return"string"==typeof e}function Y(e,n,t){for(var o=e.length,r=0;r<o&&!(r in e&&-1===n.call(t||e,e[r],r,e));r++);}function ee(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}var ne=!{toString:null}.propertyIsEnumerable("toString"),te=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function oe(){var e=Date;return e.now?e.now():(new e).getTime()}function re(e){return"[object Error]"===K(e)?e.name:""}function ie(e,n,t,o,r){var i=t;return e&&((i=e[n])===t||r&&!r(i)||o&&!o(t)||(e[n]=i=t)),i}function ae(e,n,t){var o;return e?!(o=e[n])&&H(o)&&(o=z(t)?{}:t,e[n]=o):o=z(t)?{}:t,o}function se(e){return!!e}var ue="window",ce="navigator",le="location",fe="JSON",de="crypto",ge="msCrypto",pe="msie",ve="trident/",he=null,me=null,Ie=!1;function Ce(e){var n=f();return n&&n[e]?n[e]:e===ue&&ye()?window:null}function ye(){return typeof window===s&&window}function xe(){return typeof navigator===s&&navigator?navigator:Ce(ce)}function we(e){return e&&Ie&&(e=Ce("__mockLocation"))?e:typeof location===s&&location?location:Ce(le)}function Se(){return typeof JSON===s&&JSON||null!==Ce(fe)}function Ne(){return Se()?JSON||Ce(fe):null}function Te(){var e=xe();return!e||e.userAgent===me&&null!==he||(e=((me=e.userAgent)||"").toLowerCase(),he=$(e,pe)||$(e,ve)),he}function Ae(e){var n=Object[r].toString.call(e),t="";return"[object Error]"===n?t="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Se()&&(t=Ne().stringify(e)),n+t}function be(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var ke=(Pe.dataType="MessageData",Pe);function Pe(e,n,t,o){void 0===t&&(t=!1),this.messageId=e,this.message=(t?"AI: ":"AI (Internal): ")+e,e="",Se()&&(e=Ne().stringify(o)),e=(n?" message:"+be(n):"")+(o?" props:"+be(e):""),this.message+=e}function Me(e,n){return(e||{}).logger||new Le(n)}var Le=function vt(t){this.identifier="DiagnosticLogger",this.queue=[];var r=0,a={};W(vt,this,function(i){function e(e,n){return H(e=t[e])?n:e}H(t)&&(t={}),i.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},i.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},i.throwInternal=function(e,n,t,o,r){if(t=new ke(n,t,r=void 0!==r&&r,o),i.enableDebugExceptions())throw t;z(t.message)||(o=i.consoleLoggingLevel(),r?(r=+t.messageId,!a[r]&&o>=v.WARNING&&(i.warnToConsole(t.message),a[r]=!0)):o>=v.WARNING&&i.warnToConsole(t.message),i.logInternalMessage(e,t))},i.warnToConsole=function(e){var n,t=typeof console!==o?console:Ce("console");t&&(n="log",Z(t[n=t.warn?"warn":n])&&t[n](e))},i.resetInternalMessageCount=function(){r=0,a={}},i.logInternalMessage=function(e,n){var t,o;r>=i.maxInternalMessageLimit()||(t=!0,o="AITR_"+n.messageId,a[o]?t=!1:a[o]=!0,t&&(e<=i.telemetryLoggingLevel()&&(i.queue.push(n),r++),r===i.maxInternalMessageLimit()&&(n=new ke(q.MessageLimitPerPVExceeded,e="Internal events throttle limit per PageView reached for this app.",!1),i.queue.push(n),i.warnToConsole(e))))}})},Re="ctx",De=(Ee.ParentContextKey="parent",Ee.ChildrenContextKey="childEvts",Ee);function Ee(e,r,n){var o,i=this,a=!1;i.start=oe(),i.name=e,i.isAsync=n,i.isChildEvt=function(){return!1},Z(r)&&(a=function(e){if(G)try{var n={enumerable:!0,configurable:!0,get:function(){return!o&&Z(r)&&(o=r(),r=null),o}};return G(e,"payload",n),!0}catch(t){}return!1}(i)),i.getCtx=function(e){return e?(e===Ee.ParentContextKey||e===Ee.ChildrenContextKey?i:i[Re]||{})[e]:null},i.setCtx=function(e,n){e&&(e===Ee.ParentContextKey?(i[e]||(i.isChildEvt=function(){return!0}),i[e]=n):e===Ee.ChildrenContextKey?i[e]=n:(i[Re]=i[Re]||{})[e]=n)},i.complete=function(){var e=0,n=i.getCtx(Ee.ChildrenContextKey);if("[object Array]"===K(n))for(var t=0;t<n.length;t++){var o=n[t];o&&(e+=o.time)}i.time=oe()-i.start,i.exTime=i.time-e,i.complete=function(){},!a&&Z(r)&&(i.payload=r())}}var Fe="CoreUtils.doPerf";function _e(e,n,t,o,r){if(e){var i=e;if(i=Z(i.getPerfMgr)?i.getPerfMgr():i){var a,s=void 0,e=i.getCtx(Fe);try{if(s=i.create(n(),o,r))return e&&s.setCtx&&(s.setCtx(De.ParentContextKey,e),e.getCtx&&e.setCtx&&((a=e.getCtx(De.ChildrenContextKey))||(a=[],e.setCtx(De.ChildrenContextKey,a)),a.push(s))),i.setCtx(Fe,s),t(s)}catch(u){s&&s.setCtx&&s.setCtx("exception",u)}finally{s&&i.fire(s),i.setCtx(Fe,e)}}}return t()}var Ue=function(r,n){var i=this,a=null,s=Z(r.processTelemetry),u=Z(r.setNextPlugin);i._hasRun=!1,i.getPlugin=function(){return r},i.getNext=function(){return a},i.setNext=function(e){a=e},i.processTelemetry=function(t,o){o=o||n;var e=r?r.identifier:"TelemetryPluginChain";_e(o?o.core():null,function(){return e+":processTelemetry"},function(){if(r&&s){i._hasRun=!0;try{o.setNext(a),u&&r.setNextPlugin(a),a&&(a._hasRun=!1),r.processTelemetry(t,o)}catch(n){var e=a&&a._hasRun;a&&e||o.diagLog().throwInternal(v.CRITICAL,q.PluginException,"Plugin ["+r.identifier+"] failed during processTelemetry - "+n),a&&!e&&a.processTelemetry(t,o)}}else a&&(i._hasRun=!0,a.processTelemetry(t,o))},function(){return{item:t}},!t.sync)}};function Oe(e,n){var t=[];if(e&&0<e.length)for(var o=null,r=0;r<e.length;r++){var i=e[r];i&&Z(i.processTelemetry)&&(i=new Ue(i,n),t.push(i),o&&o.setNext(i),o=i)}return 0<t.length?t[0]:null}var Ve=function ht(e,r,t,n){var o,i,a,s,u=this,c=null;null!==n&&(e&&Z(e.getPlugin)?c=function(e,n,t){var o=[],r=!t;if(e)for(;e;){var i=e.getPlugin();!r&&i!==t||(r=!0,o.push(i)),e=e.getNext()}return r||o.push(t),Oe(o,n)}(e,u,n||e.getPlugin()):n?(o=u,a=e,s=!1,(i=n)&&e&&(a=[],Y(e,function(e){!s&&e!==i||(s=!0,a.push(e))})),i&&!s&&(a=a||[]).push(i),c=Oe(a,o)):z(n)&&(c=Oe(e,u))),u.core=function(){return t},u.diagLog=function(){return Me(t,r)},u.getCfg=function(){return r},u.getExtCfg=function(e,n){var t,o;return void 0===n&&(n={}),!r||(o=r.extensionConfig)&&e&&(t=o[e]),t||n},u.getConfig=function(e,n,t){var o;return void 0===t&&(t=!1),(e=u.getExtCfg(e,null))&&!H(e[n])?o=e[n]:r&&!H(r[n])&&(o=r[n]),H(o)?t:o},u.hasNext=function(){return null!=c},u.getNext=function(){return c},u.setNext=function(e){c=e},u.processNext=function(e){var n=c;n&&(c=n.getNext(),n.processTelemetry(e,u))},u.createNew=function(e,n){return new ht((e=void 0===e?null:e)||c,r,t,n)}},Be="getPlugin",je=(We.prototype.initialize=function(e,n,t,o){this._baseTelInit(e,n,t,o)},We);function We(){var i=this,a=!1,s=null,u=null;i.core=null,i.diagLog=function(e){return i._getTelCtx(e).diagLog()},i.isInitialized=function(){return a},i.setInitialized=function(e){a=e},i.setNextPlugin=function(e){u=e},i.processNext=function(e,n){n?n.processNext(e):u&&Z(u.processTelemetry)&&u.processTelemetry(e,null)},i._getTelCtx=function(e){var n=e=void 0===e?null:e;return n||(e=s||new Ve(null,{},i.core),n=u&&u[Be]?e.createNew(null,u[Be]):e.createNew(null,u)),n},i._baseTelInit=function(e,n,t,o){e&&ie(e,"extensionConfig",[],null,H),!o&&n&&(o=n.getProcessTelContext().getNext());var r=u;u&&u[Be]&&(r=u[Be]()),i.core=n,s=new Ve(o,e,n,r),a=!0}}var qe="toGMTString",Ge="toUTCString",Ke="cookie",ze="expires",He="enabled",Je="isCookieUseDisabled",Ze="disableCookiesUsage",Xe="_ckMgr",$e="",Qe=null,Ye=null,en=null,nn=typeof document===s&&document?document:Ce("document"),tn={},on={};function rn(e){return!e||e.isEnabled()}function an(e,n){var t,o;return e?t=e.getCookieMgr():n&&(t=n.cookieCfg[Xe]||sn(n)),t||(o=n,n=(e||{}).logger,(e=sn[Xe]||on[Xe])||(e=sn[Xe]=sn(o,n),on[Xe]=e),t=e),t}function sn(e,o){var n,t,u=(ie(t=(n=e||on).cookieCfg=n.cookieCfg||{},"domain",n.cookieDomain,J,H),ie(t,"path",n.cookiePath||"/",null,H),H(t[He])&&(e=void 0,z(n[Je])||(e=!n[Je]),z(n[Ze])||(e=!n[Ze]),t[He]=e),t),c=u.path||"/",l=u.domain,r=!1!==u[He],f={isEnabled:function(){var e=r&&un(o),n=on[Xe];return e&&n&&f!==n?rn(n):e},setEnabled:function(e){r=!1!==e},set:function(e,n,t,o,r){var i,a,s;rn(f)&&(i={},-1!=(s=(a=ee(n||$e)).indexOf(";"))&&(a=ee(n.substring(0,s)),i=cn(n.substring(1+s))),ie(i,"domain",o||l,se,z),H(t)||(n=Te(),!z(i[ze])||0<(s=oe()+1e3*t)&&((o=new Date).setTime(s),ie(i,ze,ln(o,n?qe:Ge)||ln(o,n?qe:Ge)||$e,se)),n||ie(i,"max-age",$e+t,null,z)),(t=we())&&"https:"===t.protocol&&(ie(i,"secure",null,null,z),(Ye=null===Ye?!(Q(t=(xe()||{}).userAgent)&&($(t,"CPU iPhone OS 12")||$(t,"iPad; CPU OS 12")||$(t,"Macintosh; Intel Mac OS X 10_14")&&$(t,"Version/")&&$(t,"Safari")||$(t,"Macintosh; Intel Mac OS X 10_14")&&function(e,n){if(e){var t=e.length;if(e===n)return 1;if(40<=t){for(var o=t-1,r=39;0<=r;r--){if(e[o]!=n[r])return;o--}return 1}}}(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||$(t,"Chrome/5")||$(t,"Chrome/6")||$(t,"UnrealEngine")&&!$(t,"Chrome")||$(t,"UCBrowser/12")||$(t,"UCBrowser/11"))):Ye)&&ie(i,"SameSite","None",null,z)),ie(i,"path",r||c,null,z),(u.setCookie||dn)(e,fn(a,i)))},get:function(e){var n=$e;return rn(f)?(u.getCookie||function(e){var n,t=$e;return nn&&(n=nn[Ke]||$e,en!==n&&(tn=cn(n),en=n),t=ee(tn[e]||$e)),t})(e):n},del:function(e,n){rn(f)&&f.purge(e,n)},purge:function(e,n){var t;un(o)&&((t={}).path=n||"/",t[ze]="Thu, 01 Jan 1970 00:00:01 GMT",Te()||(t["max-age"]="0"),(u.delCookie||dn)(e,fn($e,t)))}};return f[Xe]=f}function un(e){if(null===Qe){Qe=!1;try{Qe=(nn||{})[Ke]!==undefined}catch(n){e&&e.throwInternal(v.WARNING,q.CannotAccessCookie,"Cannot access document.cookie - "+re(n),{exception:Ae(n)})}}return Qe}function cn(e){var t={};return e&&e.length&&Y(ee(e).split(";"),function(e){var n;(e=ee(e||$e))&&(-1==(n=e.indexOf("="))?t[e]=null:t[ee(e.substring(0,n))]=ee(e.substring(1+n)))}),t}function ln(e,n){return Z(e[n])?e[n]():null}function fn(e,n){var t=e||$e;return X(n,function(e,n){t+="; "+e+(H(n)?$e:"="+n)}),t}function dn(e,n){nn&&(nn[Ke]=e+"="+n)}var gn,pn=4294967296,vn=4294967295,hn=!1,mn=123456789,In=987654321;function Cn(e){var n,t=(t=Ce(de)||Ce(ge))&&t.getRandomValues?t.getRandomValues(new Uint32Array(1))[0]&vn:Te()?(hn||function(){try{var e=2147483647&oe();(n=(Math.random()*pn^e)+e)<0&&(n>>>=0),mn=123456789+n&vn,In=987654321-n&vn,hn=!0}catch(t){}var n}(),n=((In=36969*(65535&In)+(In>>16)&vn)<<16)+(65535&(mn=18e3*(65535&mn)+(mn>>16)&vn))>>>0&vn|0,(n>>>=0)&vn):Math.floor(pn*Math.random()|0);return e||(t>>>=0),t}function yn(e){void 0===e&&(e=22);for(var n=Cn()>>>0,t=0,o="";o.length<e;)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&n]||"",n>>>=6,5==++t&&(n=(Cn()<<2&4294967295|3&n)>>>0,t=0);return o}function xn(e,n,t){var o,r,i=n.length,a=(n&&150<(n=ee(n.toString())).length&&(o=n.substring(0,150),e.throwInternal(v.WARNING,q.NameTooLong,"name is too long.  It has been truncated to 150 characters.",{name:n},!0)),o||n);if(a.length!==i){for(var s=0,u=a;t[u]!==undefined;)s++,u=a.substring(0,147)+(r="00"+s).substr(r.length-3);a=u}return a}function wn(e,n,t){var o;return void 0===t&&(t=1024),n&&(t=t||1024,(n=ee(n)).toString().length>t&&(o=n.toString().substring(0,t),e.throwInternal(v.WARNING,q.StringValueTooLong,"string value is too long. It has been truncated to "+t+" characters.",{value:n},!0))),o||n}function Sn(o,e){var r;return e&&(r={},X(e,function(e,n){if(typeof n===s&&Se())try{n=Ne().stringify(n)}catch(t){o.throwInternal(v.WARNING,q.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:t},!0)}n=wn(o,n,8192),e=xn(o,e,r),r[e]=n}),e=r),e}function Nn(e,n,t,o){var r;return n&&(n=ee(n)).length>t&&(r=n.substring(0,t),e.throwInternal(v.WARNING,o,"input is too long, it has been truncated to "+t+" characters.",{data:n},!0)),r||n}(Kn=gn=gn||{})[Kn.LocalStorage=0]="LocalStorage",Kn[Kn.SessionStorage=1]="SessionStorage",(zn={})[zn.AI=0]="AI",zn[zn.AI_AND_W3C=1]="AI_AND_W3C",zn[zn.W3C=2]="W3C";var Tn=undefined;function An(){return kn()?bn(gn.LocalStorage):null}function bn(e){try{if(H(f()))return null;var n=new Date,t=Ce(e===gn.LocalStorage?"localStorage":"sessionStorage");t.setItem(n.toString(),n.toString());var o=t.getItem(n.toString())!==n.toString();if(t.removeItem(n.toString()),!o)return t}catch(r){}return null}function kn(){return Tn=Tn===undefined?!!bn(gn.LocalStorage):Tn}function Pn(e,n){var t=An();if(null!==t)try{return t.getItem(n)}catch(o){Tn=!1,e.throwInternal(v.WARNING,q.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+re(o),{exception:Ae(o)})}return null}function Mn(e,n,t){var o=An();if(null!==o)try{return o.setItem(n,t),1}catch(r){Tn=!1,e.throwInternal(v.WARNING,q.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+re(r),{exception:Ae(r)})}}function Ln(e,n){var t=An();if(null!==t)try{return t.removeItem(n),1}catch(o){Tn=!1,e.throwInternal(v.WARNING,q.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+re(o),{exception:Ae(o)})}}var Rn,Dn=(p(En,Rn=function(){this.ver=2,this.properties={},this.measurements={}}),En);function En(){var e=Rn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Fn,_n=(p(Un,Fn=Dn),Un.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Un.dataType="PageviewData",Un);function Un(e,n,t,o,r,i,a){var s,u,c,l=Fn.call(this)||this;return l.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},l.id=(s=e,a&&Nn(s,a,128,q.IdTooLong).toString()),l.url=Nn(e,t,2048,q.UrlTooLong),l.name=wn(e,n)||"not_specified",isNaN(o)||(l.duration=(a=""+Math.floor((s=Math.round(s=isNaN(s=o)||s<0?0:s))/1e3)%60,t=""+Math.floor(s/6e4)%60,n=""+Math.floor(s/36e5)%24,o=Math.floor(s/864e5),s=1===(s=""+s%1e3).length?"00"+s:2===s.length?"0"+s:s,a=a.length<2?"0"+a:a,t=t.length<2?"0"+t:t,(0<o?o+".":"")+(n=n.length<2?"0"+n:n)+":"+t+":"+a+"."+s)),l.properties=Sn(e,r),l.measurements=(u=e,i&&(c={},X(i,function(e,n){e=xn(u,e,c),c[e]=n}),i=c),i),l}function On(e){var n="ai."+e+".";return function(e){return n+e}}var Vn,Bn,jn=On("application"),Wn=On("device"),qn=On("location"),Gn=On("operation"),c=On("session"),Kn=On("user"),zn=On("cloud"),Dn=On("internal"),Dn=(Bn={applicationVersion:jn("ver"),applicationBuild:jn("build"),applicationTypeId:jn("typeId"),applicationId:jn("applicationId"),applicationLayer:jn("layer"),deviceId:Wn("id"),deviceIp:Wn("ip"),deviceLanguage:Wn("language"),deviceLocale:Wn("locale"),deviceModel:Wn("model"),deviceFriendlyName:Wn("friendlyName"),deviceNetwork:Wn("network"),deviceNetworkName:Wn("networkName"),deviceOEMName:Wn("oemName"),deviceOS:Wn("os"),deviceOSVersion:Wn("osVersion"),deviceRoleInstance:Wn("roleInstance"),deviceRoleName:Wn("roleName"),deviceScreenResolution:Wn("screenResolution"),deviceType:Wn("type"),deviceMachineName:Wn("machineName"),deviceVMName:Wn("vmName"),deviceBrowser:Wn("browser"),deviceBrowserVersion:Wn("browserVersion"),locationIp:qn("ip"),locationCountry:qn("country"),locationProvince:qn("province"),locationCity:qn("city"),operationId:Gn("id"),operationName:Gn("name"),operationParentId:Gn("parentId"),operationRootId:Gn("rootId"),operationSyntheticSource:Gn("syntheticSource"),operationCorrelationVector:Gn("correlationVector"),sessionId:c("id"),sessionIsFirst:c("isFirst"),sessionIsNew:c("isNew"),userAccountAcquisitionDate:Kn("accountAcquisitionDate"),userAccountId:Kn("accountId"),userAgent:Kn("userAgent"),userId:Kn("id"),userStoreRegion:Kn("storeRegion"),userAuthUserId:Kn("authUserId"),userAnonymousUserAcquisitionDate:Kn("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Kn("authUserAcquisitionDate"),cloudName:zn("name"),cloudRole:zn("role"),cloudRoleVer:zn("roleVer"),cloudRoleInstance:zn("roleInstance"),cloudEnvironment:zn("environment"),cloudLocation:zn("location"),cloudDeploymentUnit:zn("deploymentUnit"),internalNodeName:Dn("nodeName"),internalSdkVersion:Dn("sdkVersion"),internalAgentVersion:Dn("agentVersion"),internalSnippet:Dn("snippet"),internalSdkSrc:Dn("sdkSrc")},p(Hn,Vn=function(){var t=this;X(Bn,function(e,n){t[e]=n})}),Hn);function Hn(){return Vn.call(this)||this}var Jn=new Dn,Zn="AppInsightsPropertiesPlugin",Xn="AppInsightsChannelPlugin",$n="ai_session",Qn=function(){},Yn=(et.acquisitionSpan=864e5,et.renewalSpan=18e5,et.cookieUpdateInterval=6e4,et);function et(n,e){var f,d,g=Me(e),p=an(e);W(et,this,function(u){Z((n=n||{}).sessionExpirationMs)||(n.sessionExpirationMs=function(){return et.acquisitionSpan}),Z(n.sessionRenewalMs)||(n.sessionRenewalMs=function(){return et.renewalSpan}),u.config=n;var e=u.config.sessionCookiePostfix&&u.config.sessionCookiePostfix()?u.config.sessionCookiePostfix():u.config.namePrefix&&u.config.namePrefix()?u.config.namePrefix():"";function c(e,n){var t=!1,o=", session will be reset",r=n.split("|");if(2<=r.length)try{var i=+r[1]||0,a=+r[2]||0;isNaN(i)||i<=0?g.throwInternal(v.WARNING,q.SessionRenewalDateIsZero,"AI session acquisition date is 0"+o):isNaN(a)||a<=0?g.throwInternal(v.WARNING,q.SessionRenewalDateIsZero,"AI session renewal date is 0"+o):r[0]&&(e.id=r[0],e.acquisitionDate=i,e.renewalDate=a,t=!0)}catch(s){g.throwInternal(v.CRITICAL,q.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(n||"")+"]"+o+" - "+re(s),{exception:Ae(s)})}return t}function l(e,n){var t=e.acquisitionDate;e.renewalDate=n;var o=u.config,r=o.sessionRenewalMs(),i=t+o.sessionExpirationMs()-n,e=[e.id,t,n],t=i<r?i/1e3:r/1e3,r=o.cookieDomain?o.cookieDomain():null;p.set(f(),e.join("|"),0<o.sessionExpirationMs()?t:null,r),d=n}f=function(){return $n+e},u.automaticSession=new Qn,u.update=function(){var e,n=oe(),t=!1,o=u.automaticSession;o.id||(r=o,s=!1,t=!((s=(e=p.get(f()))&&Z(e.split)||(e=Pn(g,f()))?c(r,e):s)||r.id));var r,i,a,s=u.config.sessionExpirationMs();!t&&0<s&&(i=u.config.sessionRenewalMs(),r=n-o.acquisitionDate,a=n-o.renewalDate,t=(t=(t=r<0||a<0)||s<r)||i<a),t?(i=n,t=((a=u.config||{}).getNewId?a.getNewId():null)||yn,u.automaticSession.id=t(a.idLength?a.idLength():22),u.automaticSession.acquisitionDate=i,l(u.automaticSession,i),kn()||g.throwInternal(v.WARNING,q.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")):(!d||et.cookieUpdateInterval<n-d)&&l(o,n)},u.backup=function(){var e=(t=u.automaticSession).id,n=t.acquisitionDate,t=t.renewalDate;Mn(g,f(),[e,n,t].join("|"))}})}var nt=function(){},tt=function(){this.id="browser",this.deviceClass="Browser"},ot=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.6.4"};function rt(e){return"string"==typeof e&&e&&!e.match(/,|;|=| |\|/)}var it=(at.cookieSeparator="|",at.userCookieName="ai_user",at.authUserCookieName="ai_authUser",at);function at(i,e){this.isNewUser=!1;var a,s=Me(e),u=an(e);W(at,this,function(o){o.config=i;var e=o.config.userCookiePostfix&&o.config.userCookiePostfix()?o.config.userCookiePostfix():"";a=function(){return at.userCookieName+e};var n,t=u.get(a());t&&(o.isNewUser=!1,0<(n=t.split(at.cookieSeparator)).length&&(o.id=n[0])),o.id||(n=((r=i||{}).getNewId?r.getNewId():null)||yn,o.id=n(r.idLength?i.idLength():22),r=function(e){if("[object Date]"===K(e)){var n=function(e){return 1===(e=""+e).length?"0"+e:e};return e.getUTCFullYear()+"-"+n(1+e.getUTCMonth())+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+(""+(e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(new Date),o.accountAcquisitionDate=r,o.isNewUser=!0,r=[o.id,r],u.set(a(),r.join(at.cookieSeparator),31536e3),r=i.namePrefix&&i.namePrefix()?i.namePrefix()+"ai_session":"ai_session",Ln(s,r)),o.accountId=i.accountId?i.accountId():undefined;var r=u.get(at.authUserCookieName);r&&((r=(r=decodeURI(r)).split(at.cookieSeparator))[0]&&(o.authenticatedId=r[0]),1<r.length&&r[1]&&(o.accountId=r[1])),o.setAuthenticatedUserContext=function(e,n,t){void 0===t&&(t=!1),!rt(e)||n&&!rt(n)?s.throwInternal(v.WARNING,q.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0):(o.authenticatedId=e,e=o.authenticatedId,n&&(o.accountId=n,e=[o.authenticatedId,o.accountId].join(at.cookieSeparator)),t&&u.set(at.authUserCookieName,encodeURI(e)))},o.clearAuthenticatedUserContext=function(){o.authenticatedId=null,o.accountId=null,u.del(at.authUserCookieName)}})}var st=function(){},ut=function(e,n,t,o){var r=this;r.traceID=e||function(){for(var e,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t="",o=0;o<4;o++)t+=n[15&(e=Cn())]+n[e>>4&15]+n[e>>8&15]+n[e>>12&15]+n[e>>16&15]+n[e>>20&15]+n[e>>24&15]+n[e>>28&15];var r=n[8+(3&Cn())|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+r+t.substr(16,3)+t.substr(19,12)}(),r.parentID=n,r.name=t,n=we(),!t&&n&&n.pathname&&(r.name=n.pathname),r.name=wn(o,r.name)},ct="ext",lt="tags";function ft(e,n){e&&e[n]&&0===function(e){var n=typeof e;n===a||n===s&&null!==e||d("objKeys called on non-object");var t,o=[];for(t in e)e&&l.call(e,t)&&o.push(t);if(ne)for(var r=te.length,i=0;i<r;i++)e&&l.call(e,te[i])&&o.push(te[i]);return o}(e[n]).length&&delete e[n]}var dt,gt=function mt(e,n){var o=this,t=e.logger;this.appId=function(){return null},W(mt,this,function(r){r.application=new nt,r.internal=new ot(n),ye()&&(r.sessionManager=new Yn(n,e),r.device=new tt,r.location=new st,r.user=new it(n,e),r.telemetryTrace=new ut(undefined,undefined,undefined,t),r.session=new Qn),r.applySessionContext=function(e,n){var t=r.session,o=r.sessionManager;t&&Q(t.id)?ie(ae(e.ext,"app"),"sesId",t.id):o&&o.automaticSession&&ie(ae(e.ext,"app"),"sesId",o.automaticSession.id,Q)},r.applyOperatingSystemContxt=function(e,n){ie(e.ext,"os",r.os)},r.applyApplicationContext=function(e,n){var t=r.application;t&&(ie(e=ae(e,lt),Jn.applicationVersion,t.ver,Q),ie(e,Jn.applicationBuild,t.build,Q))},r.applyDeviceContext=function(e,n){var t=r.device;t&&(ie(e=ae(ae(e,ct),"device"),"localId",t.id,Q),ie(e,"ip",t.ip,Q),ie(e,"model",t.model,Q),ie(e,"deviceClass",t.deviceClass,Q))},r.applyInternalContext=function(e,n){var t,o=r.internal;o&&(ie(t=ae(e,lt),Jn.internalAgentVersion,o.agentVersion,Q),ie(t,Jn.internalSdkVersion,o.sdkVersion,Q),e.baseType!==ke.dataType&&e.baseType!==_n.dataType||(ie(t,Jn.internalSnippet,o.snippetVer,Q),ie(t,Jn.internalSdkSrc,o.sdkSrc,Q)))},r.applyLocationContext=function(e,n){var t=o.location;t&&ie(ae(e,lt,[]),Jn.locationIp,t.ip,Q)},r.applyOperationContext=function(e,n){var t=r.telemetryTrace;t&&(ie(e=ae(ae(e,ct),"trace",{traceID:undefined,parentID:undefined}),"traceID",t.traceID,Q),ie(e,"name",t.name,Q),ie(e,"parentID",t.parentID,Q))},r.applyWebContext=function(e,n){var t=o.web;t&&ie(ae(e,ct),"web",t)},r.applyUserContext=function(e,n){var t=r.user;t&&(ie(ae(e,lt,[]),Jn.userAccountId,t.accountId,Q),ie(e=ae(ae(e,ct),"user"),"id",t.id,Q),ie(e,"authId",t.authenticatedId,Q))},r.cleanUp=function(e,n){(e=e.ext)&&(ft(e,"device"),ft(e,"user"),ft(e,"web"),ft(e,"os"),ft(e,"app"),ft(e,"trace"))}})},je=(p(pt,dt=je),pt.getDefaultConfig=function(){return{instrumentationKey:function(){return undefined},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){return undefined},sessionCookiePostfix:function(){return undefined},userCookiePostfix:function(){return undefined},idLength:function(){return 22},getNewId:function(){return null}}},pt);function pt(){var l,f,e=dt.call(this)||this;return e.priority=110,e.identifier=Zn,W(pt,e,function(u,c){u.initialize=function(e,n,t,o){c.initialize(e,n,t,o);var r,i,a=u._getTelCtx(),s=u.identifier,o=pt.getDefaultConfig();f=f||{},X(o,function(e,n){f[e]=function(){return a.getConfig(s,e,n())}}),u.context=new gt(n,f),r=Xn,i=null,Y(t,function(e){if(e.identifier===r)return i=e,-1}),l=i,u.context.appId=function(){return l?l._appId:null},u._extConfig=f},u.processTelemetry=function(e,n){var t;H(e)||(n=u._getTelCtx(n),e.name===_n.envelopeType&&n.diagLog().resetInternalMessageCount(),(t=u.context||{}).session&&"string"!=typeof u.context.session.id&&t.sessionManager&&t.sessionManager.update(),function(e,n){ae(e,"tags",[]),ae(e,"ext",{});var t=u.context;t.applySessionContext(e,n),t.applyApplicationContext(e,n),t.applyDeviceContext(e,n),t.applyOperationContext(e,n),t.applyUserContext(e,n),t.applyOperatingSystemContxt(e,n),t.applyWebContext(e,n),t.applyLocationContext(e,n),t.applyInternalContext(e,n),t.cleanUp(e,n)}(e,n),t.user&&t.user.isNewUser&&(t.user.isNewUser=!1,t=new ke(q.SendBrowserInfoOnUserInit,(xe()||{}).userAgent||""),n.diagLog().logInternalMessage(v.CRITICAL,t)),u.processNext(e,n))}}),e}e.PropertiesPlugin=je,e.Session=Qn,e.SessionManager=Yn,e.TelemetryContext=gt,e.TelemetryTrace=ut,function(e,n,t){var o=Object.defineProperty;if(o)try{return o(e,n,t)}catch(r){}typeof t.value!==undefined&&(e[n]=t.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self).Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
