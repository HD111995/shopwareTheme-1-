/*!
 * Microsoft Dynamic Proto Utility, 1.1.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
"use strict";var u="constructor",y="prototype",h="function",_="_dynInstFuncs",d="_isDynProxy",g="_dynClass",I="_dynCls$",m="_dynInstChk",w=m,O="_dfOpts",t="_unknown_",r="__proto__",P="useBaseInst",C="setInstFuncs",o=Object,F=o.getPrototypeOf,k=0;function b(n,r){return n&&o[y].hasOwnProperty.call(n,r)}function x(n){return n&&(n===o[y]||n===Array[y])}function B(n){return x(n)||n===Function[y]}function D(n){if(n){if(F)return F(n);if(n=n[r]||n[y]||(n[u]?n[u][y]:null))return n}return null}function $(n,r){var t=[],u=o.getOwnPropertyNames;if(u)t=u(n);else for(var e in n)"string"==typeof e&&b(n,e)&&t.push(e);if(t&&0<t.length)for(var i=0;i<t.length;i++)r(t[i])}function j(n,r,t){return r!==u&&typeof n[r]===h&&(t||b(n,r))}function A(n){throw new TypeError("DynamicProto: "+n)}function E(n,r){for(var t=n.length-1;0<=t;t--)if(n[t]===r)return 1}function M(n,r){return b(n,y)?n.name||r||t:((n||{})[u]||{}).name||r||t}function N(n,u,r,t){b(n,y)||A("theClass is an invalid class definition.");var e=n[y];!function(n){if(F)for(var r=[],t=D(u);t&&!B(t)&&!E(r,t);){if(t===n)return 1;r.push(t),t=D(t)}}(e)&&A("["+M(n)+"] is not in class hierarchy of ["+M(u)+"]");var i=null;b(e,g)?i=e[g]:(i=I+M(n,"_")+"$"+k,k++,e[g]=i);var o=N[O],f=!!o[P];f&&t&&t[P]!==undefined&&(f=!!t[P]);var s,a,c,l,p,v,n=(a={},$(s=u,function(n){!a[n]&&j(s,n,!1)&&(a[n]=s[n])}),a);r(u,function(n,r,t,i){function u(n,r,t){var u,e=r[t];return e[d]&&i&&!1!==(u=n[_]||{})[w]&&(e=(u[r[g]]||{})[t]||e),function(){return e.apply(n,arguments)}}var e={};$(t,function(n){e[n]=u(r,t,n)});for(var o=D(n),f=[];o&&!B(o)&&!E(f,o);)$(o,function(n){!e[n]&&j(o,n,!F)&&(e[n]=u(r,o,n))}),f.push(o),o=D(o);return e}(e,u,n,f)),o=!!F&&!!o[C],c=e,i=i,l=u,p=n,t=!1!==(o=o&&t?!!t[C]:o),x(c)||(o=l[_]=l[_]||{},v=o[i]=o[i]||{},!1!==o[w]&&(o[w]=!!t),$(l,function(n){var t,u,e;j(l,n,!1)&&l[n]!==p[n]&&(v[n]=l[n],delete l[n],b(c,n)&&(!c[n]||c[n][d])||(c[n]=(t=c,u=n,(e=function(){var n,r;return(function(n,r,t,u){var e=null;if(n&&b(t,g)){var i=n[_]||{};if((e=(i[t[g]]||{})[r])||A("Missing ["+r+"] "+h),!e[m]&&!1!==i[w]){for(var o=!b(n,r),f=D(n),s=[];o&&f&&!B(f)&&!E(s,f);){var a=f[r];if(a){o=a===u;break}s.push(f),f=D(f)}try{o&&(n[r]=e),e[m]=1}catch(c){i[w]=!1}}}return e}(this,u,t,e)||(typeof(r=(r=t[n=u])===e?D(t)[n]:r)!==h&&A("["+n+"] is not a "+h),r)).apply(this,arguments)})[d]=1,e)))}))}N[O]={setInstFuncs:!0,useBaseInst:!0},module.exports=N;
